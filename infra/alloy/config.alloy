prometheus.remote_write "demo" {
	endpoint {
		url = env("PROMETHEUS_REMOTE_WRITE_ENDPOINT_URL")
	}
}

prometheus.scrape "demo" {
	scrape_interval = "10s"

	targets = [
		{"__address__" = "caddy:8082"},
		{"__address__" = "calculator-pipeline-http-request-1:8080"},
		{"__address__" = "calculator-pipeline-http-request-2:8080"},
		{"__address__" = "calculator-pipeline-cron-request:8080"},
		{"__address__" = "calculator-pipeline-nats-request:8080"},
	]

	forward_to = [prometheus.remote_write.demo.receiver]
}
